(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{209:function(e,t,a){},210:function(e,t,a){},23:function(e,t,a){e.exports={serverURL:"https://nature-go-app.herokuapp.com//api"}},260:function(e,t){},262:function(e,t){},271:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),s=a.n(c),i=(a(209),a(210),a(190)),o=a(335),l=a(330),d=a(13),j=a(24),u=a(21),b=a(65),x=a(7),h=a.n(x),O=a(10),p=a(5),m=a(12),f=a.n(m),v=a(1),g=a(23).serverURL,y={userInfo:[],isUserThere:!1},w=Object(n.createContext)(y),C=function(e){var t=e.children,a=Object(n.useState)(y.userInfo),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(y.isUserThere),o=Object(p.a)(i,2),l=o[0],d=o[1],j=window.localStorage.getItem("token");return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===j){e.next=8;break}return console.log(null!==j,c),t={headers:{Authorization:"Bearer ".concat(j)}},e.next=5,f.a.get(g+"/users/profile",t);case 5:a=e.sent,s(a.data),console.log("I'm res.data from AuthContext",a.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.jsx)(w.Provider,{value:{userInfo:c,setUserInfo:s,isUserThere:l,setIsUserThere:d},children:t})};function k(e){var t=e.component,a=Object(b.a)(e,["component"]),r=Object(n.useContext)(w).userInfo;return Object(v.jsx)(j.b,Object(u.a)(Object(u.a)({},a),{},{render:function(e){return r?Object(v.jsx)(t,Object(u.a)({},e)):Object(v.jsx)(j.a,{to:"/login"})}}))}var I=a(329),S=a(307),A=a.p+"static/media/landing_pic.fb35909e.png",N=a(332),P=a(101),R=a(310),U=Object(S.a)((function(){return{background:{background:" linear-gradient(\n      rgba(0, 0, 0, 0.55), \n      rgba(0, 0, 0, 0.55)\n    ),url(".concat(A,")"),backgroundSize:"cover",height:"100vh",color:"#f5f5f5",display:"flex",flexDirection:"column",alignItems:"center"},buttonWidth:{width:150}}}));function _(){var e=U();return Object(v.jsxs)(N.a,{className:e.background,children:[Object(v.jsxs)(N.a,{mt:20,fontWeight:900,children:[Object(v.jsx)(P.a,{variant:"h1",children:" NATURE GO"}),Object(v.jsx)(P.a,{variant:"h4",children:"Find \ud83c\udf3f Share \ud83c\udf3f Nature"})]}),Object(v.jsx)(N.a,{mt:10,children:Object(v.jsx)(d.b,{to:"/naturespots",style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{className:e.buttonWidth,variant:"contained",color:"primary",children:"Nature MAP"})})}),Object(v.jsx)(N.a,{mt:4,children:Object(v.jsx)(d.b,{to:"/signup",style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{className:e.buttonWidth,variant:"contained",color:"secondary",children:"Login / Signup"})})})]})}var F=a(37),M=a(97),W=a(315),D=a.p+"static/media/avatar1.473e89c6.png",L=a(316),B=a(317),T=a(178),z=a.n(T),E=a(6),G=a(339),H=a(312),V=a(311),Y=a(313),q=a(314),Z=a(175),$=a.n(Z),X=a(176),J=a.n(X),Q=a(177),K=a.n(Q),ee=a(52),te=a.n(ee),ae=a(29),ne=a.n(ae),re=a(81),ce=a.n(re),se={favIdArr:[],savIdArr:[],myPicIdArr:[],matchedFavIdArr:[],matchedSaveIdArr:[],matchedMyPicIdArr:[]},ie=Object(n.createContext)(se),oe=function(e){var t=e.children,a=Object(n.useState)(se.favIdArr),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(se.savIdArr),o=Object(p.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(se.myPicIdArr),u=Object(p.a)(j,2),b=u[0],x=u[1],h=Object(n.useState)(se.matchedFavIdArr),O=Object(p.a)(h,2),m=O[0],f=O[1],g=Object(n.useState)(se.matchedSaveIdArr),y=Object(p.a)(g,2),w=y[0],C=y[1],k=Object(n.useState)(se.matchedMyPicIdArr),I=Object(p.a)(k,2),S=I[0],A=I[1];return Object(v.jsx)(ie.Provider,{value:{favIdArr:c,setFavIdArr:s,savIdArr:l,setSavIdArr:d,matchedFavIdArr:m,setMatchedFavIdArr:f,matchedSaveIdArr:w,setMatchedSaveIdArr:C,myPicIdArr:b,setMyPicIdArr:x,matchedMyPicIdArr:S,setMatchedMyPicIdArr:A},children:t})},le={naturespot:"",picturesArr:[],picsIdArr:[],fetch:!1},de=Object(n.createContext)(le),je=function(e){var t=e.children,a=Object(n.useState)(le.naturespot),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(le.picturesArr),o=Object(p.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(le.picsIdArr),u=Object(p.a)(j,2),b=u[0],x=u[1],m=Object(n.useState)(le.fetch),f=Object(p.a)(m,2),g=f[0],y=f[1];return Object(n.useEffect)(Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("naturespot",c),console.log("picturesArr",l);case 2:case"end":return e.stop()}}),e)}))),[]),Object(v.jsx)(de.Provider,{value:{naturespot:c,setNaturespot:s,picturesArr:l,setPicturesArr:d,fetch:g,setFetch:y,picsIdArr:b,setPicsIdArr:x},children:t})},ue=a(23).serverURL,be=Object(S.a)((function(e){return{root:{flexGrow:1},logo:{width:"30px",height:"30px",borderRadius:"20px"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},fullList:{width:"auto"},activeBg:{backgroundColor:te.a[300]}}}));function xe(){var e=be(),t=Object(j.h)(),a=Object(n.useState)({left:!1}),c=Object(p.a)(a,2),s=c[0],i=c[1],o=Object(n.useState)(""),l=Object(p.a)(o,2),b=l[0],x=l[1],m=Object(n.useContext)(w),g=m.userInfo,y=m.setUserInfo,C=m.isUserThere,k=m.setIsUserThere,I=Object(n.useContext)(ie),S=I.setFavIdArr,A=I.setSavIdArr,R=Object(n.useContext)(de).fetch,U=Object(j.g)(),_=Object(n.useState)(0),F=Object(p.a)(_,2),T=F[0],Z=F[1],X=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&i(Object(u.a)(Object(u.a)({},s),{},Object(M.a)({},e,t)))}},Q=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={_id:g._id},y([]),k(!1),window.localStorage.removeItem("token"),U.push("/"),e.next=7,f.a.post(ue+"/users/logout",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){"/naturespots"===t.pathname&&(x("naturespots"),Z(0)),t.pathname.includes("/mypage")&&(x("mypage"),Z(1)),t.pathname.includes("/savedtomatch")&&(x("savedtomatch"),Z(2));var e=window.localStorage.getItem("token");(function(){var t=Object(O.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(C),null===e){t.next=12;break}return a={headers:{Authorization:"Bearer ".concat(e)}},t.next=5,f.a.get(ue+"/users/profile",a);case 5:return n=t.sent,y(n.data),t.next=9,S(n.data.favoritePics);case 9:return t.next=11,A(n.data.savedPics);case 11:k(!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[R]);var ee;return Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:e.root,children:Object(v.jsx)(W.a,{position:"static",children:Object(v.jsxs)(L.a,{children:[Object(v.jsx)(B.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:X("left",!0),children:Object(v.jsx)(z.a,{style:{color:ce.a[900]}})}),Object(v.jsx)(G.a,{anchor:"left",open:s.left,onClose:X("left",!1),children:(ee="left",Object(v.jsxs)("div",{className:Object(E.a)(e.list,Object(M.a)({},e.fullList,"top"===ee||"bottom"===ee)),role:"presentation",onClick:X(ee,!1),onKeyDown:X(ee,!1),children:[Object(v.jsxs)(N.a,{m:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(v.jsx)(N.a,{mr:2,children:C?Object(v.jsx)("img",{alt:g.avatarUrl,className:e.logo,src:g.avatarUrl}):Object(v.jsx)("img",{alt:"logo",className:e.logo,src:D})}),C?Object(v.jsxs)(P.a,{style:{color:ne.a[800]},children:["Hello ",g.username]}):Object(v.jsx)(P.a,{style:{color:ne.a[800]},children:"Hello\ud83d\udc4b"})]}),Object(v.jsx)(V.a,{}),Object(v.jsxs)(H.a,{children:[Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/naturespots",children:Object(v.jsxs)(Y.a,{button:!0,selected:0===T,children:[Object(v.jsx)(N.a,{mr:1,children:Object(v.jsx)($.a,{color:"primary"})}),Object(v.jsx)(q.a,{primary:Object(v.jsx)(P.a,{type:"body2",style:{color:"#008080"},children:"Nature Spots"})})]},"Nature Spots")}),C&&Object(v.jsxs)(r.a.Fragment,{children:[" ",Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/mypage/".concat(g._id),children:Object(v.jsxs)(Y.a,{button:!0,selected:1===T,children:[Object(v.jsx)(N.a,{mr:1,children:Object(v.jsx)(J.a,{color:"primary"})}),Object(v.jsx)(q.a,{primary:Object(v.jsx)(P.a,{type:"body2",style:{color:"#008080"},children:"My Page"})})]},"My Page")}),Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/savedtomatch/".concat(g._id),children:Object(v.jsxs)(Y.a,{button:!0,selected:2===T,children:[Object(v.jsx)(N.a,{mr:1,children:Object(v.jsx)(K.a,{color:"primary"})}),Object(v.jsx)(q.a,{primary:Object(v.jsx)(P.a,{type:"body2",style:{color:"#008080"},children:"Saved to Match"})})]},"Saved to Match")})]}),C?Object(v.jsx)(Y.a,{onClick:Q,children:Object(v.jsx)(q.a,{primary:Object(v.jsx)(P.a,{type:"body2",style:{color:"#008080"},children:"Logout"})})}):Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/login",children:Object(v.jsxs)(Y.a,{children:[" ",Object(v.jsx)(q.a,{primary:Object(v.jsx)(P.a,{type:"body2",style:{color:"#008080"},children:"Login"})})]})})]})]}))}),Object(v.jsxs)(N.a,{children:["naturespots"===b&&Object(v.jsx)(P.a,{variant:"h6",className:e.title,style:{color:ne.a[900]},children:"Nature Spots"}),"mypage"===b&&Object(v.jsx)(P.a,{variant:"h6",className:e.title,style:{color:ne.a[900]},children:"My Page"}),"savedtomatch"===b&&Object(v.jsx)(P.a,{variant:"h6",className:e.title,style:{color:ne.a[900]},children:"Saved Pics"})]})]})})})})}var he=a.p+"static/media/confirm.c9348c34.png",Oe=a(319),pe=a(320),me=a(323),fe=a(322),ve=a(321),ge=a(331),ye={viewport:{},currentPlaceId:null},we=Object(n.createContext)(ye),Ce=function(e){var t=e.children,a=Object(n.useState)(ye.viewport),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(ye.currentPlaceId),o=Object(p.a)(i,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){s({width:"100vw",height:"70vh",latitude:52.52,longitude:13.405,zoom:10})}),[]),Object(v.jsx)(we.Provider,{value:{viewport:c,setViewport:s,currentPlaceId:l,setCurrentPlaceId:d},children:t})},ke=Object(S.a)({cardWidth:{width:"300px"},cardGrid:{height:370}});function Ie(e){var t=e.natureSpots,a=ke(),c=Object(n.useContext)(we),s=c.viewport,i=c.setViewport,o=(c.currentPlaceId,c.setCurrentPlaceId),l=Object(n.useState)(t),j=Object(p.a)(l,2),b=j[0],x=j[1],h=Object(n.useState)(!0),O=Object(p.a)(h,2),m=O[0],f=O[1],g=function(e){return e.images.length>0?e.images[0].url:he};return Object(n.useEffect)((function(){x(t),f(!1)}),[]),Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsxs)(N.a,{mt:3,children:[Object(v.jsx)(P.a,{variant:"h6",color:"secondary",children:"Search for a spot"}),Object(v.jsx)(ge.a,{id:"standard-basic",label:"type here",onChange:function(e){return function(e){var a=t.filter((function(t){return t.title.toLowerCase().includes(e.target.value)}));x(a)}(e)}})]}),Object(v.jsx)(N.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:!m&&b.map((function(e){return Object(v.jsx)(N.a,{m:2,children:Object(v.jsxs)(Oe.a,{className:a.cardWidth,children:[Object(v.jsx)(d.b,{to:{pathname:"details/".concat(e._id),state:{spot:e}},style:{textDecoration:"none"},children:Object(v.jsxs)(pe.a,{children:[Object(v.jsx)(ve.a,{component:"img",alt:e.title,height:"220",src:g(e),title:e.title}),Object(v.jsxs)(fe.a,{children:[Object(v.jsx)(P.a,{gutterBottom:!0,color:"secondary",variant:"h5",component:"h2",children:e.title}),Object(v.jsx)(P.a,{variant:"body2",color:"textSecondary",component:"p",children:e.desc.length>80?e.desc.slice(0,80)+"...":e.desc})]})]})}),Object(v.jsxs)(me.a,{children:[Object(v.jsx)(R.a,{size:"small",color:"primary",onClick:function(){return t=e._id,a=e.lat,n=e.long,window.scrollTo(0,0),o(t),void i(Object(u.a)(Object(u.a)({},s),{},{latitude:a,longitude:n}));var t,a,n},children:"On Map"}),Object(v.jsx)(d.b,{to:{pathname:"details/".concat(e._id),state:{spot:e}},style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{size:"small",color:"primary",children:"Learn More"})})]})]})},e._id)}))})]})}var Se=a(191),Ae=a(67),Ne=(a(251),a(324)),Pe=a(137),Re=a.n(Pe),Ue=a(63),_e=a.n(Ue),Fe=a(336),Me={natureSpots:[],newAdded:!1},We=a(23).serverURL,De=Object(n.createContext)(Me),Le=function(e){var t=e.children,a=Object(n.useState)(Me.natureSpots),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(Me.newAdded),o=Object(p.a)(i,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){(function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get(We+"/naturespots");case 3:t=e.sent,s(t.data),console.log("naturespotscontext",t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(v.jsx)(De.Provider,{value:{natureSpots:c,setNatureSpots:s,newAdded:l,setNewAdded:d},children:t})},Be=a(23).serverURL,Te=Object(S.a)((function(e){return{root:{flexGrow:1,width:"100vw",height:"100vh"},flexColumn:{display:"flex",flexDirection:"column",justifyContent:"center"},comeTop:{zIndex:"1"},label:{width:"max-content",color:"teal",fontSize:"13px",borderBottom:"1px dashed teal",margin:"3px 0",marginBottom:"10px"},marginTop:{marginTop:e.spacing(2)},marginBottom:{marginBottom:e.spacing(10)},textWidth:{width:150},white:{backgroundColor:Re.a[500],color:Re.a[50]},leftFloat:{float:"right",marginTop:5,marginRight:5}}}));function ze(){var e=Te(),t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(3),o=Object(p.a)(i,2),l=(o[0],o[1],Object(n.useState)(null)),j=Object(p.a)(l,2),b=j[0],x=j[1],m=Object(n.useState)(null),g=Object(p.a)(m,2),y=g[0],C=g[1],k=Object(n.useContext)(w),I=k.userInfo,S=k.isUserThere,A=Object(n.useContext)(De),U=A.natureSpots,_=A.setNatureSpots,M=A.setNewAdded,W=Object(n.useContext)(we),D=W.viewport,L=W.setViewport,B=W.currentPlaceId,T=W.setCurrentPlaceId,z=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),M(!1),a={user:I._id,title:b,desc:y,rating:0,lat:c.lat,long:c.long},e.prev=3,e.next=6,f.a.post(Be+"/naturespots",a);case 6:n=e.sent,_([].concat(Object(F.a)(U),[n.data])),M(!0),s(null),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(r.a.Fragment,{children:[" ",Object(v.jsx)(xe,{}),Object(v.jsxs)(Ne.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"},className:e.marginBottom,children:[Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsxs)(Ae.c,Object(u.a)(Object(u.a)({},D),{},{mapboxApiAccessToken:"pk.eyJ1IjoibW9lcGlpIiwiYSI6ImNra2o0MW43bTBkeTUyd216MXBmdGtndXMifQ.8mAacitFZCe-Eq2S73dTPA",onViewportChange:function(e){return L(e)},mapStyle:"mapbox://styles/moepii/ckppic7c80e3b17pdh4k1pfvk",onDblClick:function(e){var t=Object(p.a)(e.lngLat,2),a=t[0],n=t[1];s({lat:n,long:a})},children:[U.map((function(t){return Object(v.jsxs)("div",{children:[Object(v.jsx)(Ae.a,{latitude:t.lat,longitude:t.long,offsetLeft:1.5*-D.zoom,offsetTop:3*-D.zoom,children:Object(v.jsx)(_e.a,{style:{fontSize:3*D.zoom,color:t.user.username===I.username?"tomato":"slateblue",cursor:"pointer"},onClick:function(){return e=t._id,a=t.lat,n=t.long,T(e),void L(Object(u.a)(Object(u.a)({},D),{},{latitude:a,longitude:n}));var e,a,n}})}),t._id===B&&Object(v.jsx)(Ae.b,{className:e.comeTop,latitude:t.lat,longitude:t.long,closeButton:!0,closeOnClick:!1,anchor:"right",onClose:function(){return T(null)},children:Object(v.jsxs)("div",{className:e.flexColumn,children:[Object(v.jsx)("label",{className:e.label,children:"Place"}),Object(v.jsx)(N.a,{className:e.textWidth,children:Object(v.jsx)(P.a,{gutterBottom:!0,vairant:"h5",children:t.title})}),Object(v.jsx)("label",{className:e.label,children:"Review"}),Object(v.jsx)(N.a,{className:e.textWidth,children:Object(v.jsx)(P.a,{gutterBottom:!0,variant:"body2",color:"textSecondary",component:"p",align:"left",children:t.desc.length>80?t.desc.slice(0,80)+"...":t.desc})}),Object(v.jsx)("label",{className:e.label,children:"Rating"}),Object(v.jsx)(N.a,{component:"fieldset",borderColor:"transparent",children:Object(v.jsx)(Fe.a,{name:"read-only",value:t.rating,readOnly:!0,precision:.1})}),Object(v.jsx)("label",{className:e.label,children:"Infomation"}),Object(v.jsxs)(N.a,{children:[Object(v.jsxs)(P.a,{variant:"body2",color:"textSecondary",component:"p",children:["Created by ",Object(v.jsx)("b",{children:t.user.username})]}),Object(v.jsx)(P.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(Se.a)(t.createdAt)})]}),Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(d.b,{to:{pathname:"details/".concat(t._id),state:{spot:t}},style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{color:"secondary",variant:"outlined",children:"See More"})})})]})})]},t._id)})),c&&S&&Object(v.jsx)(Ae.b,{latitude:c.lat,longitude:c.long,closeButton:!0,closeOnClick:!1,anchor:"right",onClose:function(){return s(null)},children:Object(v.jsx)("div",{children:Object(v.jsxs)("form",{className:e.flexColumn,onSubmit:z,children:[Object(v.jsx)("label",{className:e.label,children:"Title"}),Object(v.jsx)(ge.a,{id:"outlined-basic",label:"Enter a title",variant:"outlined",onChange:function(e){return x(e.target.value)}}),Object(v.jsx)("label",{className:e.label,children:"Review"}),Object(v.jsx)(ge.a,{id:"outlined-basic",label:"About this place",variant:"outlined",multiline:!0,rows:4,onChange:function(e){return C(e.target.value)}}),Object(v.jsx)(R.a,{className:e.marginTop,variant:"contained",color:"primary",type:"submit",children:"Add new spot"})]})})})]}))}),U.length>0&&Object(v.jsx)(Ie,{natureSpots:U})]})]})}var Ee=a(181),Ge=a.n(Ee),He=Object(S.a)((function(e){return{marginFlex:{marginTop:e.spacing(2),marginLeft:e.spacing(2),display:"flex",justifyContent:"flex-start"}}})),Ve=function(){var e=He(),t=Object(j.g)();return Object(v.jsx)("div",{className:e.marginFlex,children:Object(v.jsx)(Ge.a,{style:{color:ce.a[500]},fontSize:"large",onClick:function(){t.goBack()}})})},Ye=a.p+"static/media/nouploads.f833bcc0.gif",qe=a(194),Ze=a(337),$e=Object(S.a)((function(e){return{small:{width:e.spacing(3),height:e.spacing(3)}}}));function Xe(e){var t=e.pic,a=$e(),c=Object(n.useContext)(w).userInfo,s=Object(n.useState)(!1),i=Object(p.a)(s,2),o=i[0],l=i[1],j=function(e){return Object(v.jsxs)(N.a,{display:"flex",justifyContent:"flex-start",alignItems:"center",ml:2,children:[Object(v.jsx)(N.a,{mr:1,mt:1,mb:1,children:Object(v.jsx)(Ze.a,{alt:e.author.username,src:e.author.avatarUrl,className:a.small})}),Object(v.jsx)(N.a,{mt:1,mb:1,children:Object(v.jsx)(P.a,{color:"secondary",children:e.author.username})})]})};return Object(n.useEffect)((function(){t.author._id===c._id&&l(!0)}),[]),Object(v.jsx)(qe.a,{children:c.length<=0?Object(v.jsx)(N.a,{children:j(t)}):Object(v.jsx)(r.a.Fragment,{children:o?Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/mypage/".concat(c._id),children:j(t)}):Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/otheruser/".concat(t.author._id),children:j(t)})})})}var Je={myPicsArr:[],favPicsArr:[]},Qe=Object(n.createContext)(Je),Ke=function(e){var t=e.children,a=Object(n.useState)(Je.myPicsArr),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(Je.favPicsArr),o=Object(p.a)(i,2),l=o[0],d=o[1];return Object(v.jsx)(Qe.Provider,{value:{myPicsArr:c,setMyPicsArr:s,favPicsArr:l,setFavPicsArr:d},children:t})},et=a(182),tt=a.n(et),at=a(183),nt=a.n(at),rt=a(138),ct=a.n(rt),st=a(184),it=a.n(st),ot=a(139),lt=a.n(ot),dt=a(117),jt=a.n(dt),ut=a(23).serverURL,bt=Object(S.a)((function(){return{action:{padding:"0px !important"}}}));function xt(e){var t=e.pic,a=bt(),r=Object(j.h)(),c=Object(n.useContext)(w).userInfo,s=Object(n.useContext)(ie),i=s.matchedFavIdArr,o=s.setMatchedFavIdArr,l=s.matchedSaveIdArr,d=s.setMatchedSaveIdArr,u=s.matchedMyPicIdArr,b=Object(n.useContext)(de),x=b.picturesArr,p=b.setPicturesArr,m=Object(n.useContext)(Qe),g=m.myPicsArr,y=m.setMyPicsArr,C=m.favPicsArr,k=m.setFavPicsArr,I=function(e,t){var a="favorite"==t?{icon1:Object(v.jsx)(ct.a,{}),icon2:Object(v.jsx)(ct.a,{style:{color:tt.a[500]}}),icon3:Object(v.jsx)(nt.a,{}),showNum:e.likes,matchedArr:i,setMatchedIdArr:o}:{icon1:Object(v.jsx)(lt.a,{}),icon2:Object(v.jsx)(lt.a,{style:{color:ne.a[500]}}),icon3:Object(v.jsx)(it.a,{}),showNum:e.saved,matchedArr:l,setMatchedIdArr:d};return u&&u.includes(e.url)?Object(v.jsxs)(B.a,{"aria-label":"add to ".concat(t),disabled:!0,children:[a.icon1,Object(v.jsx)(P.a,{children:a.showNum})]}):a.matchedArr&&a.matchedArr.includes(e.url)?Object(v.jsxs)(B.a,{"aria-label":"add to ".concat(t),onClick:function(){return S(e.url,t)},children:[a.icon2,Object(v.jsx)(P.a,{children:a.showNum})]}):Object(v.jsxs)(B.a,{"aria-label":"add to ".concat(t),onClick:function(){return S(e.url,t)},children:[a.icon3,Object(v.jsx)(P.a,{children:a.showNum})]})},S=function(e,a){var n,s,j,u,b;b=x.length>0?x:C,"favorite"===a?(n="removefavorite",s="addfavorite",j=i,u=o):(n="removesaved",s="addsaved",j=l,u=d);var p=function(){var e=Object(O.a)(h.a.mark((function e(a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="addsaved"==a?{natureSpotId:t.naturespot,userId:c._id,origUrl:t.url}:"removesaved"==a?{userId:c._id,origUrl:t.url}:"removefavorite"==a?{imageUrl:t.url,imageId:t._id,userId:c._id}:{imageId:t._id,userId:c._id},e.next=3,f.a.post(ut+"/images/".concat(a),n);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(j.includes(e)){p(n),u(j.filter((function(t){return t!==e})));var m=b.findIndex((function(t){return t.url==e}));j===i?(b[m].likes-=1,r.pathname.includes("/mypage")&&k(C.filter((function(t){return t.url!==e})))):b[m].saved-=1}else{p(s),u((function(t){return[].concat(Object(F.a)(t),[e])}));var v=b.findIndex((function(t){return t.url==e}));j===i?b[v].likes+=1:b[v].saved+=1}},A=function(){var e=Object(O.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.pathname.includes("/mypage")?y(g.filter((function(e){return e.url!==t.url}))):p(x.filter((function(e){return e.url!==t.url}))),a={imageId:t._id,userId:c._id,natureSpotId:t.naturespot},e.next=4,f.a.post(ut+"/images/deletemypic",a);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(me.a,{disableSpacing:!0,className:a.action,children:[I(t,"favorite"),I(t,"save"),u&&u.includes(t.url)&&Object(v.jsx)(N.a,{ml:3,children:Object(v.jsx)(jt.a,{onClick:A,style:{color:ne.a[200]}})})]})}var ht=a(120),Ot=a(86),pt=a.n(Ot),mt=Object(S.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"}}}));function ft(){var e=mt(),t=Object(n.useContext)(de).picturesArr,a=Object(n.useContext)(w).userInfo;return Object(n.useEffect)((function(){console.log(a)}),[]),Object(v.jsxs)(N.a,{sx:{width:500,height:450,overflowY:"scroll"},m:2,children:[Object(v.jsx)(ht.a,{breakpointCols:{default:3,1100:4,700:2},className:pt.a.myMasonryGrid,columnClassName:pt.a.myMasonryGridColumn,children:t.map((function(t){return Object(v.jsxs)(Oe.a,{className:e.root,children:[Object(v.jsx)(Xe,{pic:t}),Object(v.jsx)(ve.a,{className:e.media,image:t.url}),a&&0!==Object.keys(a).length&&Object(v.jsx)(xt,{pic:t})]},t._id)}))}),0==t.length&&Object(v.jsxs)(N.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(v.jsx)(P.a,{color:"secondary",variant:"h4",children:"No Uploads Yet"}),Object(v.jsx)(N.a,{mb:10,children:Object(v.jsx)("img",{alt:"nofavorites",src:Ye,width:"250"})})]})]})}var vt=a.p+"static/media/noreview.90eb4a87.gif",gt=a(334),yt=a(318),wt=a(273),Ct=a(83),kt=a.n(Ct),It={commentsArr:[],ratingsArr:[],avarageRating:null,writeReview:!1,writeUpdate:!1,clickedIndex:0},St=Object(n.createContext)(It),At=function(e){var t=e.children,a=Object(n.useState)(It.commentsArr),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(It.ratingsArr),o=Object(p.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(It.avarageRating),u=Object(p.a)(j,2),b=u[0],x=u[1],h=Object(n.useState)(It.writeReview),O=Object(p.a)(h,2),m=O[0],f=O[1],g=Object(n.useState)(It.writeUpdate),y=Object(p.a)(g,2),w=y[0],C=y[1],k=Object(n.useState)(It.clickedIndex),I=Object(p.a)(k,2),S=I[0],A=I[1];return Object(v.jsx)(St.Provider,{value:{commentsArr:c,setCommentsArr:s,ratingsArr:l,setRatingsArr:d,avarageRating:b,setAvarageRating:x,writeReview:m,setWriteReview:f,writeUpdate:w,setWriteUpdate:C,clickedIndex:S,setClickedIndex:A},children:t})},Nt=a(23).serverURL,Pt=Object(S.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),height:"400px",width:"250px"},textField:{width:"300px"}}}));function Rt(e){var t=e.comment,a=e.index,c=Pt(),s=Object(j.i)().spotId,i=Object(n.useState)(t.comment),o=Object(p.a)(i,2),l=o[0],d=(o[1],Object(n.useState)(t.comment)),u=Object(p.a)(d,2),b=u[0],x=u[1],m=Object(n.useState)(t.rating),g=Object(p.a)(m,2),y=g[0],w=(g[1],Object(n.useState)(t.rating)),C=Object(p.a)(w,2),k=C[0],I=C[1],S=Object(n.useContext)(St),A=S.commentsArr,U=S.setCommentsArr,_=(S.avarageRating,S.setAvarageRating),M=(S.writeReview,S.setWriteReview,S.writeUpdate),W=S.setWriteUpdate,D=Object(n.useContext)(De),L=D.natureSpots,B=D.setNatureSpots,T=(D.setNewAdded,function(){W(!1)}),z=function(){var e=Object(O.a)(h.a.mark((function e(a){var n,r,c,i,o,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l===b&&y===k){e.next=22;break}return(n=Object(F.a)(A))[a].comment=b,n[a].rating=k,e.next=6,U(n);case 6:return r=function(){return Number((n.map((function(e){return e.rating})).reduce((function(e,t){return e+t}),0)/n.length).toFixed(1))},e.next=9,_(r());case 9:return c={oldReview:l,oldRating:y,createdAt:t.createdAt,newReview:b,newRating:k},e.next=12,f.a.post(Nt+"/comments/updatecomment",c);case 12:return e.sent,i={natId:s,averageRating:r()},e.next=16,f.a.post(Nt+"/naturespots/updaterating",i);case 16:return e.sent,o=L.findIndex((function(e){return e._id===s})),(d=Object(F.a)(L))[o].rating=r(),e.next=22,B(d);case 22:W(!1);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(r.a.Fragment,{children:M&&Object(v.jsx)(gt.a,{"aria-labelledby":a,className:c.modal,open:M,onClose:T,closeAfterTransition:!0,BackdropComponent:yt.a,BackdropProps:{timeout:500},children:Object(v.jsx)(wt.a,{in:M,id:a,children:Object(v.jsxs)(qe.a,{className:c.paper,children:[Object(v.jsx)(N.a,{display:"flex",justifyContent:"flex-end",children:Object(v.jsx)(R.a,{color:"secondary",variant:"outlined",startIcon:Object(v.jsx)(kt.a,{}),onClick:T,children:Object(v.jsx)(P.a,{variant:"body2",children:"Cancel"})})}),Object(v.jsxs)(N.a,{display:"flex",flexDirection:"column",alignItems:"center",mt:3,id:a,children:[Object(v.jsx)(P.a,{variant:"h4",color:"secondary",id:a,children:"Update comment"}),Object(v.jsx)(N.a,{m:3,id:"transition-modal-description",children:Object(v.jsx)(ge.a,{className:c.textField,label:"Review",multiline:!0,rows:6,defaultValue:t.comment,variant:"outlined",onChange:function(e){return x(e.target.value)}})}),Object(v.jsxs)(N.a,{component:"fieldset",borderColor:"transparent",children:[Object(v.jsx)(P.a,{component:"legend",children:"Update Rating:"}),Object(v.jsx)(Fe.a,{precision:.5,name:"simple-controlled",value:k,onChange:function(e,t){I(t)}})]}),Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(R.a,{variant:"contained",color:"secondary",onClick:function(){return z(a)},children:"Update"})})]})]})})})})}var Ut=a(185),_t=a.n(Ut),Ft=a(73),Mt=a.n(Ft),Wt=a(84),Dt=a.n(Wt),Lt=a(96),Bt=a.n(Lt),Tt=a(23).serverURL,zt=Object(S.a)((function(e){return{small:{width:e.spacing(3),height:e.spacing(3)},grey:{color:te.a[500]},marginIcon:{marginLeft:"30px"}}}));function Et(e){var t=e.comment,a=e.index,r=zt(),c=Object(j.i)().spotId,s=Object(n.useContext)(w).userInfo,i=Object(n.useContext)(De),o=i.natureSpots,l=i.setNatureSpots,d=(i.setNewAdded,Object(n.useContext)(St)),u=d.commentsArr,b=d.setCommentsArr,x=(d.avarageRating,d.setAvarageRating),p=(d.writeReview,d.setWriteReview,d.writeUpdate,d.setWriteUpdate),m=(d.clickedIndex,d.setClickedIndex),g=function(){var e=Object(O.a)(h.a.mark((function e(){var a,n,r,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.filter((function(e){return e.comment!==t.comment&&e.createdAt!==t.createdAt})),e.next=3,b(a);case 3:return n=Number((a.map((function(e){return e.rating})).reduce((function(e,t){return e+t}),0)/a.length).toFixed(1)),e.next=6,x(n);case 6:return r={comment:t.comment,createdAt:t.createdAt},e.next=9,f.a.post(Tt+"/comments/deletecomment",r);case 9:return e.sent,s=o.findIndex((function(e){return e._id===c})),(i=Object(F.a)(o))[s].rating=n,e.next=15,l(i);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(N.a,{children:[Object(v.jsxs)(N.a,{display:"flex",children:[Object(v.jsx)(Ze.a,{alt:t.author.username,src:t.author.avatarUrl,className:r.small}),Object(v.jsx)(N.a,{ml:1,children:Object(v.jsx)(P.a,{color:"secondary",variant:"body2",children:t.author.username})}),Object(v.jsxs)(N.a,{ml:2,display:"flex",children:[Object(v.jsx)(_t.a,{style:{color:Mt.a[600]}}),Object(v.jsx)(P.a,{color:"secondary",variant:"body2",children:t.rating})]}),Object(v.jsx)(N.a,{ml:5,children:Object(v.jsx)(P.a,{variant:"body2",className:r.grey,children:t.createdAt.substring(0,10)})})]}),Object(v.jsx)(P.a,{variant:"body2",children:t.comment}),t.author._id===s._id&&Object(v.jsxs)(N.a,{display:"flex",justifyContent:"flex-end",children:[Object(v.jsx)(Bt.a,{style:{color:Dt.a[400]},onClick:function(){p(!0),m(a)}}),Object(v.jsx)(N.a,{className:r.marginIcon,children:Object(v.jsx)(jt.a,{style:{color:te.a[400]},onClick:g})})]})]})}var Gt=a(23).serverURL,Ht=Object(S.a)((function(e){return{textField:{width:"300px"}}}));function Vt(e){var t=e.spot,a=Ht(),r=Object(n.useState)(null),c=Object(p.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(3),l=Object(p.a)(o,2),d=l[0],j=l[1],u=Object(n.useContext)(w).userInfo,b=Object(n.useContext)(St),x=b.commentsArr,m=b.setCommentsArr,g=(b.avarageRating,b.setAvarageRating),y=(b.writeReview,b.setWriteReview),C=Object(n.useContext)(De),k=C.natureSpots,I=C.setNatureSpots,S=(C.setNewAdded,function(){var e=Object(O.a)(h.a.mark((function e(){var a,n,r,c,i,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s,d,u._id,t._id),a={naturespot:t._id,author:u._id,comment:s,rating:d},e.next=4,f.a.post(Gt+"/comments/newcomment",a);case 4:return e.sent,n={naturespot:t._id,author:{avatarUrl:u.avatarUrl,username:u.username,_id:u._id},comment:s,rating:d,createdAt:(new Date).toISOString()},e.next=8,m((function(e){return[].concat(Object(F.a)(e.reverse()),[n]).reverse()}));case 8:return r=[].concat(Object(F.a)(x),[n]),c=function(){return Number((r.map((function(e){return e.rating})).reduce((function(e,t){return e+t}),0)/r.length).toFixed(1))},e.next=12,g(c());case 12:return i={natId:t._id,averageRating:c()},e.next=15,f.a.post(Gt+"/naturespots/updaterating",i);case 15:return e.sent,o=k.findIndex((function(e){return e._id===t._id})),(l=Object(F.a)(k))[o].rating=c(),e.next=21,I(l);case 21:return e.next=23,y(!1);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(v.jsxs)(N.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(v.jsx)(N.a,{m:2,mt:4,children:Object(v.jsx)(P.a,{variant:"h4",children:" Review Form"})}),Object(v.jsx)(ge.a,{className:a.textField,id:"outlined-multiline-static",label:"Review",multiline:!0,rows:6,defaultValue:"Write here",variant:"outlined",onChange:function(e){return i(e.target.value)}}),Object(v.jsxs)(N.a,{component:"fieldset",mt:3,borderColor:"transparent",children:[Object(v.jsx)(P.a,{component:"legend",children:"Give Rating:"}),Object(v.jsx)(Fe.a,{precision:.5,name:"simple-controlled",value:d,onChange:function(e,t){j(t)}})]}),Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(R.a,{variant:"contained",color:"primary",onClick:S,children:"Submit"})})]})}var Yt=a(118),qt=a.n(Yt),Zt=a(23).serverURL,$t=Object(S.a)((function(e){return{new:{marginTop:e.spacing(5)}}}));function Xt(e){var t=e.spot,a=$t(),c=Object(n.useState)(!0),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useContext)(w).userInfo,j=Object(n.useContext)(St),u=j.commentsArr,b=j.setCommentsArr,x=j.avarageRating,m=j.setAvarageRating,g=j.writeReview,y=j.setWriteReview,C=j.clickedIndex,k=function(){y(!g)};return Object(n.useEffect)(Object(O.a)(h.a.mark((function e(){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(Zt+"/comments/".concat(t._id));case 2:return a=e.sent,e.next=5,b(a.data.reverse());case 5:console.log(a.data),n=a.data.map((function(e){return e.rating})).reduce((function(e,t){return e+t}),0),r=n/a.data.length,m(Number(r.toFixed(1))),o(!1);case 10:case"end":return e.stop()}}),e)}))),[]),Object(v.jsxs)("div",{children:[Object(v.jsxs)(N.a,{display:"flex",justifyContent:"space-around",children:[Object(v.jsxs)(N.a,{children:[Object(v.jsx)(P.a,{color:"secondary",variant:"h4",children:"Reviews"}),Object(v.jsx)(P.a,{color:"primary",variant:"body2",children:t.title}),!i&&u.length>0&&Object(v.jsxs)(N.a,{display:"flex",children:[Object(v.jsx)(Fe.a,{precision:.1,name:"read-only",value:x,readOnly:!0}),Object(v.jsx)(P.a,{color:"secondary",children:x})]})]}),l&&0!==Object.keys(l).length&&Object(v.jsx)(N.a,{className:a.new,children:g?Object(v.jsx)(R.a,{color:"secondary",variant:"outlined",startIcon:Object(v.jsx)(kt.a,{}),onClick:k,children:Object(v.jsx)(P.a,{variant:"body2",children:"Cancel"})}):Object(v.jsx)(R.a,{color:"secondary",variant:"outlined",startIcon:Object(v.jsx)(Bt.a,{}),onClick:k,children:Object(v.jsx)(P.a,{variant:"body2",children:"New"})})})]}),!g&&Object(v.jsxs)(r.a.Fragment,{children:[!i&&u&&u.map((function(e,t){return Object(v.jsx)(N.a,{mt:4,children:Object(v.jsx)(Et,{comment:e,index:t},e._id)},e._id)})),!i&&u.length>0&&Object(v.jsx)(r.a.Fragment,{children:Object(v.jsx)(Rt,{comment:u[C],index:C})}),!i&&0==u.length&&Object(v.jsxs)(N.a,{display:"flex",alignItems:"center",flexDirection:"column",mt:1,children:[l&&0!==Object.keys(l).length&&Object(v.jsx)(N.a,{ml:17,mb:2,children:Object(v.jsx)(qt.a,{style:{color:Mt.a[400],fontSize:60}})}),Object(v.jsx)(P.a,{color:"secondary",variant:"h4",children:"No Reviews Yet"}),Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(P.a,{color:"secondary",variant:"h5",children:"Write a new review!"})}),Object(v.jsx)(N.a,{children:Object(v.jsx)("img",{alt:"no reviews",src:vt,width:"250"})}),l&&0==Object.keys(l).length&&Object(v.jsx)(d.b,{to:"/login",style:{textDecoration:"none"},children:Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",children:"Login"})})})]})]}),g&&Object(v.jsx)(Vt,{spot:t})]})}var Jt=Object(S.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),height:"500px",width:"300px"}}}));function Qt(e){var t=e.spot,a=Jt(),c=r.a.useState(!1),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useContext)(St).setWriteReview,d=function(){o(!1),l(!1)};return Object(n.useEffect)((function(){console.log(t)}),[]),Object(v.jsxs)(N.a,{children:[Object(v.jsx)(R.a,{variant:"outlined",onClick:function(){o(!0)},children:"Reviews"}),Object(v.jsx)(gt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:i,onClose:d,closeAfterTransition:!0,BackdropComponent:yt.a,BackdropProps:{timeout:500},children:Object(v.jsx)(wt.a,{in:i,children:Object(v.jsxs)(qe.a,{className:a.paper,style:{maxHeight:500,overflow:"auto"},children:[Object(v.jsx)(N.a,{display:"flex",justifyContent:"flex-end",children:Object(v.jsx)(kt.a,{onClick:d})}),Object(v.jsx)(Xt,{spot:t})]})})})]})}var Kt=a(64),ea=a.n(Kt),ta=a(23).serverURL,aa=Object(S.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},card:{width:"320px"},media:{height:0,paddingTop:"56.25%"},cancel:{color:te.a[400]}}}));function na(e){var t=e.natureId,a=e.userInfo,r=aa(),c=Object(n.useState)(!1),s=Object(p.a)(c,2),i=(s[0],s[1],Object(n.useState)(!1)),o=Object(p.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(null),u=Object(p.a)(j,2),b=u[0],x=u[1],m=Object(n.useState)(null),g=Object(p.a)(m,2),y=g[0],w=g[1],C=Object(n.useContext)(de),k=(C.picturesArr,C.setPicturesArr),I=Object(n.useContext)(ie),S=(I.matchedMyPicIdArr,I.setMatchedMyPicIdArr),A=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(URL.createObjectURL(t.target.files[0])),w(t.target.files),d(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(h.a.mark((function e(n){var r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!1),r={url:n,natureId:t,authorId:a._id},e.next=4,f.a.post(ta+"/images/uploadimage",r);case 4:return c=e.sent,(s=c.data.newImage).author={avatarUrl:a.avatarUrl,username:a.username,_id:a._id},e.next=9,k((function(e){return[].concat(Object(F.a)(e),[s]).reverse()}));case 9:return e.next=11,S((function(e){return[].concat(Object(F.a)(e),[n])}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}throw new Error("Select a file first!");case 3:return(t=new FormData).append("file",y[0]),e.next=7,f.a.post(ta+"/aws/upload",t,{headers:{"Content-Type":"multipart/form-data"}});case 7:return a=e.sent,console.log(a.data.Location),e.next=11,U(a.data.Location);case 11:console.log("success"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("upload failed");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useState)((function(){console.log(a&&0===Object.keys(a).length)}),[]),Object(v.jsxs)("div",{className:r.root,children:[!l&&a&&0!==Object.keys(a).length&&Object(v.jsxs)(N.a,{mt:5,children:[Object(v.jsx)("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file",onChange:function(e){return A(e)}}),Object(v.jsx)("label",{htmlFor:"raised-button-file",children:Object(v.jsx)(R.a,{variant:"contained",color:"secondary",component:"span",startIcon:Object(v.jsx)(ea.a,{}),children:"Upload"})})]}),l&&Object(v.jsxs)(N.a,{m:3,children:[Object(v.jsx)(P.a,{color:"secondary",variant:"h5",children:"Preview"}),Object(v.jsx)(N.a,{display:"flex",justifyContent:"center",children:Object(v.jsx)(Oe.a,{className:r.card,children:Object(v.jsx)(ve.a,{className:r.media,image:b})})}),Object(v.jsxs)(N.a,{m:2,display:"flex",justifyContent:"space-around",children:[Object(v.jsx)(R.a,{className:r.cancel,variant:"outlined",onClick:function(){x(null),w(null),d(!1)},children:"Cancel"}),Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",onClick:_,children:"Submit"})]})]})]})}var ra=a(186),ca=a.n(ra),sa=a(23).serverURL,ia=Object(S.a)((function(){return{root:{flexGrow:1,width:"100vw",height:"100vh"},boxWidth:{width:"300px",display:"flex"},center:{display:"flex",justifyContent:"center",alignItems:"center"}}}));function oa(){var e=ia(),t=Object(j.h)(),a=Object(n.useContext)(w),r=a.userInfo,c=a.setUserInfo,s=t.state.spot,i=Object(n.useContext)(ie),o=i.setMatchedFavIdArr,l=i.setMatchedSaveIdArr,d=i.setMatchedMyPicIdArr,b=Object(n.useContext)(de),x=b.setNaturespot,m=(b.picturesArr,b.setPicturesArr),g=b.setPicsIdArr,y=Object(n.useState)(!1),C=Object(p.a)(y,2),k=C[0],I=C[1],S=Object(n.useState)(!0),A=Object(p.a)(S,2),R=A[0],U=A[1],_=Object(n.useState)({width:350,height:200,latitude:s.lat,longitude:s.long,zoom:11}),F=Object(p.a)(_,2),M=F[0],W=F[1],D=s.desc.length>200,L=s.desc.length>100?s.desc.slice(0,100)+"...":s.desc,T=function(){I(!k)},z=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window.localStorage.getItem("token"))){e.next=8;break}return a={headers:{Authorization:"Bearer ".concat(t)}},e.next=5,f.a.get(sa+"/users/profile",a);case 5:return n=e.sent,c(n.data),e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(Object(O.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:return t=e.sent,e.next=5,m([]);case 5:return D&&I(!0),x(s._id),e.next=9,f.a.get(sa+"/images/".concat(s._id));case 9:return a=e.sent,e.next=12,m(a.data.reverse());case 12:return e.next=14,g(a.data.map((function(e){return e.url})));case 14:if(!t){e.next=27;break}if(console.log(t),!t.favoritePics){e.next=19;break}return e.next=19,o(a.data.map((function(e){return e.url})).filter((function(e){return t.favoritePics.map((function(e){return e.url})).includes(e)})));case 19:if(!t.savedPics){e.next=24;break}return n=t.savedPics.map((function(e){return e.originalImage})),console.log(n),e.next=24,l(a.data.map((function(e){return e.url})).filter((function(e){return n.includes(e)})));case 24:if(!t.myPics){e.next=27;break}return e.next=27,d(a.data.map((function(e){return e.url})).filter((function(e){return t.myPics.map((function(e){return e.url})).includes(e)})));case 27:U(!1);case 28:case"end":return e.stop()}}),e)}))),[]),Object(v.jsxs)("div",{className:e.root,children:[Object(v.jsx)(xe,{}),Object(v.jsx)(Ve,{}),Object(v.jsxs)(Ne.a,{container:!0,children:[Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(P.a,{color:"secondary",variant:"h3",children:s.title})}),Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(N.a,{className:e.center,mt:2,children:Object(v.jsx)(Ae.c,Object(u.a)(Object(u.a)({},M),{},{mapboxApiAccessToken:"pk.eyJ1IjoibW9lcGlpIiwiYSI6ImNra2o0MW43bTBkeTUyd216MXBmdGtndXMifQ.8mAacitFZCe-Eq2S73dTPA",onViewportChange:function(e){return W(e)},mapStyle:"mapbox://styles/moepii/ckppic7c80e3b17pdh4k1pfvk",transitionDuration:"50",children:Object(v.jsx)(Ae.a,{latitude:s.lat,longitude:s.long,offsetLeft:1.5*-M.zoom,offsetTop:3*-M.zoom,children:Object(v.jsx)(_e.a,{style:{fontSize:3*M.zoom,color:"tomato",cursor:"pointer"}})})}))})}),Object(v.jsx)(N.a,{m:2,children:Object(v.jsx)(Qt,{spot:s})}),Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(N.a,{className:e.center,children:Object(v.jsxs)(N.a,{className:e.boxWidth,children:[k?Object(v.jsx)(P.a,{className:e.maxW,variant:"body2",children:L}):Object(v.jsx)(P.a,{className:e.maxW,variant:"body2",children:s.desc}),L.length>100&&Object(v.jsx)(N.a,{mt:12,className:e.noPadding,children:k?Object(v.jsxs)(B.a,{onClick:T,children:[Object(v.jsx)(ca.a,{fontSize:"small"}),Object(v.jsx)(P.a,{className:e.maxW,variant:"body2",children:"See more"})]}):Object(v.jsxs)(B.a,{onClick:T,children:[Object(v.jsx)(qt.a,{fontSize:"small"}),Object(v.jsx)(P.a,{className:e.maxW,variant:"body2",children:"Hide"})]})})]})})}),Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(na,{natureId:s._id,userInfo:r})})]}),!R&&Object(v.jsx)(ft,{})]})}var la=a(187),da=a.n(la),ja=Object(S.a)((function(){return{lime:{backgroundColor:da.a[200],color:ne.a[800]},lightBlue:{color:ne.a[700]}}}));function ua(){var e=Object(n.useContext)(w).userInfo,t=Object(j.h)(),a=ja();return Object(v.jsx)("div",{children:Object(v.jsxs)(N.a,{display:"flex",justifyContent:"center",alignItems:"center",children:[Object(v.jsxs)(N.a,{mr:2,children:[Object(v.jsx)(Ze.a,{alt:e.username,src:e.avatarUrl}),Object(v.jsx)(P.a,{className:a.lightBlue,variant:"h5",children:e.username})]}),t.pathname.includes("/mypage")&&Object(v.jsx)(N.a,{ml:3,children:Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/updateprofile/".concat(e._id),children:Object(v.jsx)(R.a,{className:a.lime,variant:"contained",children:"Update Profile"})})})]})})}var ba=a(119),xa=a.n(ba),ha=a(23).serverURL,Oa=Object(S.a)((function(e){return{root:{maxWidth:345,"&:hover":{boxShadow:"-1px 10px 29px 0px rgba(0,0,0,0.8)"}},media:{height:0,paddingTop:"56.25%"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[3],padding:e.spacing(2,4,3)}}}));function pa(e){var t=e.pic,a=Oa(),c=Object(n.useState)(!1),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(null),j=Object(p.a)(l,2),u=j[0],b=j[1],x=function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,f.a.get(ha+"/naturespots/".concat(t));case 3:a=e.sent,b(a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)(ve.a,{className:a.media,image:t.url,onClick:function(){return x(t.naturespot._id)}}),Object(v.jsx)(gt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:i,onClose:function(){o(!1),b(null)},closeAfterTransition:!0,BackdropComponent:yt.a,BackdropProps:{timeout:500},children:Object(v.jsx)(wt.a,{in:i,children:Object(v.jsxs)("div",{className:a.paper,children:[Object(v.jsx)(d.b,{to:{pathname:"/details/".concat(t.naturespot._id),state:{spot:u}},style:{textDecoration:"none"},children:Object(v.jsx)(N.a,{m:2,children:Object(v.jsxs)(R.a,{variant:"outlined",color:"secondary",children:[Object(v.jsx)(P.a,{id:"transition-modal-title",variant:"h4",children:t.naturespot.title}),Object(v.jsx)(xa.a,{})]})})}),Object(v.jsxs)(Oe.a,{className:a.root,children:["author"in t&&Object(v.jsx)(Xe,{pic:t}),Object(v.jsx)(ve.a,{className:a.media,image:t.url,onClick:function(){return x(t.naturespot._id)}})]},t._id)]})})})]})}var ma=Object(S.a)((function(){return{root:{maxWidth:345,"&:hover":{boxShadow:"-1px 10px 29px 0px rgba(0,0,0,0.8)"}}}}));function fa(e){var t=e.picsArr,a=ma(),r=Object(n.useContext)(ie).setMatchedFavIdArr,c=Object(n.useContext)(de).setPicsIdArr,s=Object(n.useContext)(Qe).favPicsArr;return Object(n.useEffect)((function(){t==s&&(c(t.map((function(e){return e.url}))),r(s.map((function(e){return e.url}))))}),[]),Object(v.jsx)(N.a,{sx:{width:500,height:450,overflowY:"scroll"},m:2,children:Object(v.jsx)(ht.a,{breakpointCols:{default:3,1100:4,700:2},className:pt.a.myMasonryGrid,columnClassName:pt.a.myMasonryGridColumn,children:t.map((function(e){return Object(v.jsxs)(Oe.a,{className:a.root,children:["author"in e&&Object(v.jsx)(Xe,{pic:e}),Object(v.jsx)(pa,{pic:e}),Object(v.jsx)(xt,{pic:e})]},e._id)}))})})}var va=a.p+"static/media/nofavorites.c121e4a4.gif",ga=a(23).serverURL;function ya(e){var t=e.showFavPics,a=Object(n.useContext)(w).userInfo,r=Object(n.useContext)(ie),c=(r.setSavIdArr,r.matchedFavIdArr,r.setMatchedFavIdArr,r.setMatchedSaveIdArr),s=r.setMatchedMyPicIdArr,i=Object(n.useContext)(Qe),o=i.myPicsArr,l=i.setMyPicsArr,j=i.favPicsArr,u=i.setFavPicsArr,b=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window.localStorage.getItem("token"))){e.next=7;break}return a={headers:{Authorization:"Bearer ".concat(t)}},e.next=5,f.a.get(ga+"/users/profile",a);case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(Object(O.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return t=e.sent,n=a._id||t._id,e.next=6,f.a.get(ga+"/users/myfavpics/".concat(n));case 6:r=e.sent,l(r.data.myPics),u(r.data.favoritePics),c(r.data.favoritePics.map((function(e){return e.url})).filter((function(e){return t.savedPics.map((function(e){return e.originalImage})).includes(e)}))),s(r.data.myPics.map((function(e){return e.url})));case 11:case"end":return e.stop()}}),e)}))),[]),Object(v.jsxs)("div",{children:[!t&&Object(v.jsxs)(N.a,{mt:3,children:[Object(v.jsx)(P.a,{variant:"h5",style:{color:ne.a[900]},children:"My Nature Pics"}),Object(v.jsx)(fa,{picsArr:o})]}),!t&&0==o.length&&Object(v.jsxs)(N.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(v.jsx)(P.a,{color:"secondary",variant:"h4",children:"No Uploads Yet"}),Object(v.jsx)("img",{alt:"nomypics",src:Ye,width:"250"}),Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/naturespots",children:Object(v.jsx)(R.a,{variant:"contained",color:"secondary",children:"Find"})}),Object(v.jsx)(N.a,{mt:1,children:Object(v.jsxs)(P.a,{variant:"body2",color:"secondary",children:["Find or Create Naturespot ",Object(v.jsx)("br",{})," to upload your own pictures"]})})]}),t&&Object(v.jsxs)(N.a,{mt:3,children:[Object(v.jsx)(P.a,{variant:"h5",style:{color:ne.a[900]},children:"Favorites"}),Object(v.jsx)(fa,{picsArr:j})]}),t&&0==j.length&&Object(v.jsxs)(N.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(v.jsx)(P.a,{color:"secondary",variant:"h4",children:"No Favorites Yet"}),Object(v.jsx)("img",{alt:"nofavorites",src:va,width:"250"}),Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/naturespots",children:Object(v.jsx)(R.a,{variant:"contained",color:"secondary",children:"Find"})}),Object(v.jsx)(N.a,{mt:1,children:Object(v.jsxs)(P.a,{variant:"body2",color:"secondary",children:["Find Naturespot ",Object(v.jsx)("br",{})," to like others' pictures"]})})]})]})}var wa=a(9),Ca=a(325),ka=a(326),Ia=a(338),Sa=Object(S.a)((function(){return{color:{color:ce.a[600]}}})),Aa=Object(wa.a)((function(e){return{root:{width:42,height:26,padding:0,margin:e.spacing(1)},switchBase:{padding:1,"&$checked":{transform:"translateX(16px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#52d869",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.info.light),backgroundColor:e.palette.info.light,opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,a=Object(b.a)(e,["classes"]);return Object(v.jsx)(Ia.a,Object(u.a)({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},a))}));function Na(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),s=Object(p.a)(c,2),i=(s[0],s[1],Object(n.useState)([])),o=Object(p.a)(i,2),l=(o[0],o[1],Object(n.useContext)(w).userInfo,Sa());return Object(v.jsxs)("div",{children:[Object(v.jsx)(xe,{}),Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)(ua,{})}),Object(v.jsx)(N.a,{mt:3,display:"flex",justifyContent:"center",alignItems:"center",children:Object(v.jsx)(Ca.a,{children:Object(v.jsxs)(Ne.a,{component:"label",container:!0,alignItems:"center",spacing:1,children:[Object(v.jsx)(Ne.a,{item:!0,children:Object(v.jsx)(P.a,{color:"primary",children:"My Pics"})}),Object(v.jsx)(Ne.a,{item:!0,children:Object(v.jsx)(ka.a,{control:Object(v.jsx)(Aa,{checked:a,onChange:function(e){r(e.target.checked)},name:"checkedB"}),label:"Favorites",className:l.color})})]})})}),Object(v.jsx)(ya,{showFavPics:a})]})}var Pa={savedArr:[],spotsArr:[]},Ra=Object(n.createContext)(Pa),Ua=function(e){var t=e.children,a=Object(n.useState)(Pa.savedArr),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(Pa.spotsArr),o=Object(p.a)(i,2),l=o[0],d=o[1];return Object(v.jsx)(Ra.Provider,{value:{savedArr:c,setSavedArr:s,spotsArr:l,setSpotsArr:d},children:t})},_a=a(188),Fa=a.n(_a);function Ma(e){var t=e.pic,a=e.spot;return Object(v.jsx)(d.b,{to:{pathname:"/details/".concat(t.natureSpotId),state:{spot:a}},style:{textDecoration:"none"},children:Object(v.jsxs)(N.a,{mt:1,mb:1,display:"flex",children:[Object(v.jsx)(P.a,{color:"secondary",children:a.title}),Object(v.jsx)(xa.a,{style:{color:Fa.a[500]}})]})})}var Wa=a(189),Da=a.n(Wa),La=a(88),Ba=a.n(La),Ta=a(87),za=a.n(Ta),Ea=a(23).serverURL,Ga=Object(S.a)((function(){return{flex:{display:"flex",justifyContent:"space-between",alignItems:"center"},card:{width:"320px"},media:{height:0,paddingTop:"56.25%"}}}));function Ha(e){e.value;var t=Object(b.a)(e,["value"]);return Object(v.jsx)("span",Object(u.a)(Object(u.a)({},t),{},{children:Object(v.jsx)(za.a,{})}))}function Va(e){var t=e.saved,a=Ga(),c=Object(n.useState)(!1),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(null),d=Object(p.a)(l,2),j=d[0],b=d[1],x=Object(n.useState)(null),m=Object(p.a)(x,2),g=m[0],y=m[1],C=Object(n.useContext)(w).userInfo,k=Object(n.useContext)(Ra),I=k.savedArr,S=k.setSavedArr,A=function(){var e=Object(O.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(I.filter((function(e){return e.originalImage!==t.originalImage}))),a={userId:C._id,origUrl:t.originalImage},e.next=4,f.a.post(Ea+"/images/removesaved",a);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(URL.createObjectURL(t.target.files[0])),y(t.target.files),o(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(O.a)(h.a.mark((function e(a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!1),n={url:a,user:C._id,picId:t._id},e.next=4,f.a.post(Ea+"/users/uploadmatching",n);case 4:return e.sent,e.next=7,S(I.map((function(e){return e._id==t._id?Object(u.a)(Object(u.a)({},e),{},{matchedImage:a}):e})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g){e.next=3;break}throw new Error("Select a file first!");case 3:return(t=new FormData).append("file",g[0]),e.next=7,f.a.post(Ea+"/aws/upload",t,{headers:{"Content-Type":"multipart/form-data"}});case 7:return a=e.sent,e.next=10,_(a.data.Location);case 10:console.log("success"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("upload failed");case 16:o(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),M=function(){o(!1),b(null),y(null)};return Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsxs)(N.a,{mt:2,className:a.flex,children:[function(e){if(!i)return t.matchedImage.length<=0?Object(v.jsxs)(N.a,{className:a.flex,children:[Object(v.jsx)("input",{accept:"image/*",style:{display:"none"},id:t._id,multiple:!0,type:"file",onClick:M,onChange:function(e){return U(e)}}),Object(v.jsx)("label",{htmlFor:t._id,children:Object(v.jsx)(R.a,{variant:"contained",color:"secondary",component:"span",startIcon:Object(v.jsx)(ea.a,{}),children:"Upload"})})]}):e<5?Object(v.jsxs)(N.a,{component:"fieldset",borderColor:"transparent",children:[Object(v.jsx)(Fe.a,{name:"customized-icons",IconContainerComponent:Ha,value:t.matching.length,readOnly:!0}),Object(v.jsxs)(P.a,{color:"secondary",variant:"body2",children:["Matching accepted: ",e]})]}):Object(v.jsxs)(N.a,{className:a.flex,children:[Object(v.jsx)(Ba.a,{color:"secondary"}),Object(v.jsx)(P.a,{color:"secondary",children:"Matching Accepted!"})," ",Object(v.jsx)(Ba.a,{color:"secondary"})]})}(t.matching.length),!i&&Object(v.jsx)(Da.a,{style:{color:te.a[600]},onClick:function(){return A(t)}})]}),i&&Object(v.jsxs)(N.a,{m:3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(v.jsx)(P.a,{color:"secondary",variant:"h5",children:"Preview"}),Object(v.jsx)(Oe.a,{className:a.card,children:Object(v.jsx)(ve.a,{className:a.media,image:j})}),Object(v.jsxs)(N.a,{m:2,display:"flex",justifyContent:"space-between",children:[Object(v.jsx)(N.a,{mt:2,mr:2,children:Object(v.jsx)(R.a,{variant:"outlined",style:{color:te.a[600]},onClick:function(){o(!1),b(null),y(null)},children:"Cancel"})}),Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(R.a,{variant:"contained",color:"secondary",onClick:F,children:"Submit"})})]})]})]})}var Ya=a(23).serverURL,qa=Object(S.a)((function(){return{cardWidth:{width:"350px"},flexWrap:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},media:{height:0,paddingTop:"56.25%"}}}));function Za(e){var t=e.pic,a=(e.index,qa()),r=(Object(n.useContext)(Ra).spotsArr,Object(n.useState)(!1)),c=Object(p.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(null),l=Object(p.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(!0),b=Object(p.a)(u,2),x=b[0],m=b[1];return Object(n.useEffect)(Object(O.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(Ya+"/naturespots/".concat(t.natureSpotId));case 2:a=e.sent,j(a.data),m(!1);case 5:case"end":return e.stop()}}),e)}))),[]),Object(v.jsx)(N.a,{m:3,className:a.cardWidth,children:Object(v.jsxs)(Oe.a,{className:a.root,children:[Object(v.jsx)(qe.a,{children:Object(v.jsx)(N.a,{display:"flex",justifyContent:"flex-start",alignItems:"center",ml:2,children:!x&&d&&Object(v.jsx)(Ma,{pic:t,spot:d})})}),s?Object(v.jsx)(ve.a,{className:a.media,image:t.matchedImage}):Object(v.jsx)(ve.a,{className:a.media,image:t.originalImage}),Object(v.jsxs)(fe.a,{children:[t.matchedImage.length>0&&Object(v.jsxs)(N.a,{children:[Object(v.jsx)(N.a,{display:"flex",justifyContent:"flex-start",children:s?Object(v.jsx)(P.a,{color:"primary",variant:"body2",children:"Your Matching Pic"}):Object(v.jsxs)(P.a,{color:"primary",variant:"body2",children:["Original Pic"," "]})}),Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",onClick:function(){i(!s)},children:"Flip"})]}),Object(v.jsx)(Va,{saved:t})]})]},t._id)})}var $a=Object(S.a)((function(){return{cardWidth:{width:"350px"},flexWrap:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center"}}}));function Xa(e){var t=e.savedArr,a=$a();return Object(v.jsx)(r.a.Fragment,{children:Object(v.jsx)(N.a,{className:a.flexWrap,children:t.map((function(e,t){return Object(v.jsx)(Za,{pic:e,index:t},e._id)}))})})}var Ja=a.p+"static/media/nosaves.2b7d3d6d.gif",Qa=a(23).serverURL;function Ka(){var e=Object(n.useContext)(w).userInfo,t=Object(n.useContext)(Ra),a=t.savedArr,r=t.setSavedArr,c=(t.spotsArr,t.setSpotsArr,function(){var e=Object(O.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window.localStorage.getItem("token"))){e.next=7;break}return a={headers:{Authorization:"Bearer ".concat(t)}},e.next=5,f.a.get(Qa+"/users/profile",a);case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(n.useEffect)(Object(O.a)(h.a.mark((function t(){var a,n,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:return a=t.sent,n=e._id||a._id,t.next=6,f.a.get(Qa+"/users/savedpics/".concat(n));case 6:return s=t.sent,t.next=9,r(s.data.savedPics);case 9:case"end":return t.stop()}}),t)}))),[]),Object(v.jsxs)("div",{children:[Object(v.jsx)(xe,{}),Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)(ua,{})}),a&&Object(v.jsx)(Xa,{savedArr:a}),0==a.length&&Object(v.jsxs)(N.a,{display:"flex",flexDirection:"column",alignItems:"center",mt:5,mb:2,children:[Object(v.jsxs)(N.a,{mb:1,children:[Object(v.jsx)(P.a,{color:"secondary",variant:"h4",children:"No Favorites Yet"}),Object(v.jsx)(N.a,{mt:1,children:Object(v.jsx)(P.a,{variant:"body2",color:"secondary",children:"Save others' pictures for matching photos!"})})]}),Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)(d.b,{style:{textDecoration:"none"},to:"/naturespots",children:Object(v.jsx)(R.a,{variant:"contained",color:"secondary",children:"Find"})})}),Object(v.jsx)("img",{alt:"nosaved",src:Ja,width:"330"})]})]})}var en=a.p+"static/media/nomatchings.edd0f422.gif",tn={otherUser:{},havMatPicArr:[],giveMatPicArr:[]},an=Object(n.createContext)(tn),nn=function(e){var t=e.children,a=Object(n.useState)(tn.otherUser),r=Object(p.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(tn.havMatPicArr),o=Object(p.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(tn.giveMatPicArr),u=Object(p.a)(j,2),b=u[0],x=u[1];return Object(v.jsx)(an.Provider,{value:{otherUser:c,setOtherUser:s,havMatPicArr:l,setHavMatPicArr:d,giveMatPicArr:b,setGiveMatPicArr:x},children:t})};function rn(e){var t=e.otherUser,a=Object(n.useContext)(an).havMatPicArr;return Object(v.jsxs)(N.a,{display:"flex",justifyContent:"space-around",alignItems:"center",children:[Object(v.jsxs)(N.a,{m:3,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(v.jsx)(N.a,{mr:2,children:Object(v.jsx)(Ze.a,{alt:t.username,src:t.avatarUrl})}),Object(v.jsx)(P.a,{color:"secondary",children:t.username})]}),Object(v.jsx)(N.a,{children:Object(v.jsxs)(P.a,{color:"primary",children:["Matching: ",a.length," Pics"]})})]})}var cn=a(23).serverURL,sn=Object(S.a)((function(){return{flex:{display:"flex",justifyContent:"space-between",alignItems:"center"},card:{width:"320px"},media:{height:0,paddingTop:"56.25%"},amber:{color:Mt.a[700]},blue:{color:Dt.a[600]}}}));function on(e){e.value;var t=Object(b.a)(e,["value"]);return Object(v.jsx)("span",Object(u.a)(Object(u.a)({},t),{},{children:Object(v.jsx)(za.a,{})}))}function ln(e){var t,a=e.pic,c=e.index,s=sn(),i=Object(j.i)().otherUserId,o=Object(n.useState)(!0),l=Object(p.a)(o,2),d=l[0],b=l[1],x=Object(n.useState)(!1),m=Object(p.a)(x,2),g=m[0],y=m[1],C=Object(n.useContext)(an),k=C.setHavMatPicArr,I=C.havMatPicArr,S=(C.giveMatPicArr,C.setGiveMatPicArr,Object(n.useContext)(w).userInfo),A=function(){var e=Object(O.a)(h.a.mark((function e(t,a){var n,r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=11;break}return n=I[a].matching,n.push(S._id),k(I.map((function(e,t){return t===a?Object(u.a)(Object(u.a)({},e),{},{matching:n}):e}))),b(!1),r={userToGet:i,userToGive:S._id,savPicId:t},e.next=8,f.a.post(cn+"/users/givematching",r);case 8:e.sent,e.next=18;break;case 11:return c=I[a].matching.filter((function(e){return e!==S._id})),k(I.map((function(e,t){return t===a?Object(u.a)(Object(u.a)({},e),{},{matching:c}):e}))),b(!0),s={getBackFrom:i,userToGetBack:S._id,savPicId:t},e.next=17,f.a.post(cn+"/users/getbackmatching",s);case 17:e.sent;case 18:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=I[c].matching;e.length>0&&e.includes(S._id)&&b(!1),e.length>0&&e.length>=5&&y(!0),console.log(I[c],e)}),[d]),Object(v.jsxs)(N.a,{display:"flex",justifyContent:"space-between",mt:2,children:[(t=I.map((function(e){return e.matching}))[c].length,t>=0&&t<5?Object(v.jsx)(N.a,{component:"fieldset",borderColor:"transparent",children:Object(v.jsx)(Fe.a,{name:"customized-icons",IconContainerComponent:on,value:t,readOnly:!0})}):Object(v.jsxs)(N.a,{className:s.flex,children:[Object(v.jsx)(Ba.a,{color:"secondary"}),Object(v.jsx)(P.a,{color:"secondary",children:"Matching Accepted!"})," ",Object(v.jsx)(Ba.a,{color:"secondary"})]})),Object(v.jsx)(N.a,{children:!g&&Object(v.jsx)(r.a.Fragment,{children:d?Object(v.jsxs)(R.a,{color:"secondary",variant:"outlined",onClick:function(){return A(a._id,c)},children:[Object(v.jsx)(P.a,{children:"Give"})," ",Object(v.jsx)(za.a,{style:{color:Mt.a[700]}})," "]}):Object(v.jsxs)(R.a,{color:"primary",variant:"outlined",onClick:function(){return A(a._id,c)},children:[Object(v.jsx)(P.a,{children:"Remove"})," ",Object(v.jsx)(za.a,{style:{color:Dt.a[600]}})]})})})]})}var dn=a(23).serverURL,jn=Object(S.a)((function(){return{cardWidth:{width:"330px"},flexWrap:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},media:{height:0,paddingTop:"56.25%"}}}));function un(e){var t=e.pic,a=e.index,r=jn(),c=Object(n.useState)(null),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!0),d=Object(p.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!0),x=Object(p.a)(b,2),m=x[0],g=x[1];return Object(n.useEffect)(Object(O.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(dn+"/naturespots/".concat(t.natureSpotId));case 2:a=e.sent,o(a.data),g(!1);case 5:case"end":return e.stop()}}),e)}))),[]),Object(v.jsx)(N.a,{m:3,className:r.cardWidth,children:Object(v.jsxs)(Oe.a,{className:r.root,children:[!m&&Object(v.jsx)(qe.a,{children:Object(v.jsx)(N.a,{display:"flex",justifyContent:"flex-start",alignItems:"center",ml:2,children:Object(v.jsx)(Ma,{pic:t,spot:i})})}),j?Object(v.jsx)(ve.a,{className:r.media,image:t.originalImage}):Object(v.jsx)(ve.a,{className:r.media,image:t.matchedImage}),Object(v.jsxs)(fe.a,{children:[Object(v.jsxs)(N.a,{children:[Object(v.jsx)(N.a,{display:"flex",justifyContent:"flex-start",children:j?Object(v.jsxs)(P.a,{color:"primary",variant:"body2",children:["Original Pic"," "]}):Object(v.jsx)(P.a,{color:"primary",variant:"body2",children:"Matching Pic"})}),Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",onClick:function(){u(!j)},children:"Flip"})]}),Object(v.jsx)(ln,{pic:t,index:a})]})]},t._id)})}var bn=a(23).serverURL;function xn(){var e=Object(j.i)().otherUserId,t=Object(n.useState)(null),a=Object(p.a)(t,2),r=a[0],c=a[1],s=Object(n.useContext)(w),i=s.userInfo,o=s.setUserInfo,l=Object(n.useState)(i._id||null),d=Object(p.a)(l,2),u=d[0],b=d[1],x=Object(n.useContext)(an),m=x.havMatPicArr,g=x.setHavMatPicArr,y=(x.giveMatPicArr,x.setGiveMatPicArr),C=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window.localStorage.getItem("token"))){e.next=9;break}return a={headers:{Authorization:"Bearer ".concat(t)}},e.next=5,f.a.get(bn+"/users/profile",a);case 5:return n=e.sent,o(n.data),e.next=9,b(n.data._id);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var t=Object(O.a)(h.a.mark((function t(){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(a=window.localStorage.getItem("token"))){t.next=9;break}return n={headers:{Authorization:"Bearer ".concat(a)}},t.next=5,f.a.get(bn+"/users/otheruser/".concat(e),n);case 5:r=t.sent,c(r.data),g(r.data.savedPics.filter((function(e){return e.matchedImage.length>0}))),y(r.data.savedPics.filter((function(e){return e.matching.includes(u)})).map((function(e){return e._id})));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)(Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return e.next=4,k();case 4:case"end":return e.stop()}}),e)}))),[]),Object(v.jsxs)("div",{children:[Object(v.jsx)(xe,{}),Object(v.jsx)(Ve,{}),r&&Object(v.jsx)(rn,{otherUser:r}),m&&m.map((function(e,t){return Object(v.jsx)(un,{pic:e,index:t})})),m&&0===m.length&&Object(v.jsxs)(N.a,{children:[Object(v.jsx)(P.a,{variant:"h4",color:"secondary",children:"The user did not upload any matching pics yet"}),Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)("img",{alt:"nomatchings",src:en,width:"250px"})})]})]})}var hn=a(49),On=a.n(hn),pn=a(328),mn=a(327),fn=a(333),vn=a(23).serverURL,gn=Object(S.a)((function(e){return{background:{background:" linear-gradient(\n      rgba(255, 255, 255, 0.7), \n      rgba(255, 255, 255, 0.7)\n    ),url(".concat(A,")"),backgroundSize:"cover"},paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{marginTop:e.spacing(3),width:60,height:60,borderRadius:"30px"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2),backgroundColor:"#008B8B",color:"white",fontSize:"20px"},textColor:{color:"#008B8B"},flex:{display:"flex",alignItems:"center",marginBottom:e.spacing(3)},specialOutline:{borderColor:"rgb(0, 0, 0, 0.6) !important",borderWidth:2},media:{width:"150px",height:"150px",borderRadius:"50%"}}}));function yn(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useRef)(),c=gn(),s=Object(n.useState)(""),i=Object(p.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(!1),b=Object(p.a)(u,2),x=b[0],m=b[1],g=Object(n.useState)(D),y=Object(p.a)(g,2),w=y[0],C=y[1],k=Object(n.useState)(D),I=Object(p.a)(k,2),S=I[0],A=I[1],U=Object(n.useState)(!1),_=Object(p.a)(U,2),F=_[0],M=_[1],W=Object(j.g)(),L=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(!0),C(URL.createObjectURL(t.target.files[0])),A(t.target.files);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S){e.next=3;break}throw new Error("Select a file first!");case 3:return(t=new FormData).append("file",S[0]),e.next=7,f.a.post(vn+"/aws/upload",t,{headers:{"Content-Type":"multipart/form-data"}});case 7:return a=e.sent,console.log("success"),e.abrupt("return",a.data.Location);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),console.log("upload failed");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var n=Object(O.a)(h.a.mark((function n(c){var s,i,o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),w!=D){n.next=5;break}s="https://naturego.s3.amazonaws.com/bucketFolder/1625515883520.png",n.next=8;break;case 5:return n.next=7,B();case 7:s=n.sent;case 8:if(a.current.value===r.current.value){n.next=10;break}return n.abrupt("return",l("Passwords do not match"));case 10:return i={username:t.current.value,email:e.current.value,password:a.current.value,avatarUrl:s},n.prev=11,n.next=14,f.a.post(vn+"/users/register",i);case 14:l(""),m(!0),console.log("signup form submitted"),W.push("/confirmregister"),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(11),console.log(n.t0),o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t.current.value.length>0&&t.current.value.length<=3?l("Username must be longer than 3 letters"):o.test(e.current.value)?a.current.value.length<=5?l("Password must be longer than 5 letters"):l("Email is already used"):l("Email must be valid");case 25:m(!1);case 26:case"end":return n.stop()}}),n,null,[[11,20]])})));return function(e){return n.apply(this,arguments)}}();return Object(v.jsx)("div",{className:c.background,children:Object(v.jsxs)(mn.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(pn.a,{}),Object(v.jsxs)("div",{className:c.paper,children:[Object(v.jsxs)(N.a,{display:"flex",children:[Object(v.jsx)(N.a,{mr:3,children:Object(v.jsx)("img",{alt:"logo",className:c.avatar,src:D})}),Object(v.jsx)(N.a,{mt:3,mr:2,children:Object(v.jsx)(P.a,{fontWeight:"fontWeightBold",component:"h1",variant:"h2",color:"secondary",children:"Signup"})}),Object(v.jsx)(N.a,{children:Object(v.jsx)(_e.a,{className:c.avatar,color:"secondary"})})]}),Object(v.jsxs)("form",{className:c.form,onSubmit:T,noValidate:!0,children:[Object(v.jsxs)(Ne.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsxs)(N.a,{mb:2,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(v.jsx)(N.a,{children:Object(v.jsx)("img",{className:c.media,src:w})}),Object(v.jsx)("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file",onChange:function(e){return L(e)}}),Object(v.jsx)("label",{htmlFor:"raised-button-file",children:!F&&Object(v.jsx)(R.a,{variant:"contained",color:"secondary",component:"span",startIcon:Object(v.jsx)(ea.a,{}),children:"Upload"})}),F&&Object(v.jsx)(N.a,{m:2,children:Object(v.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){M(!1),C(D),A(D)},children:"Cancel"})}),!F&&Object(v.jsx)(N.a,{children:Object(v.jsx)(P.a,{children:"Upload your Profile Pic"})})]})}),o&&Object(v.jsx)(N.a,{ml:10,display:"flex",justifyContent:"center",alignItems:"center",children:Object(v.jsx)(fn.a,{severity:"error",children:o})}),Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(ge.a,{InputProps:{classes:{notchedOutline:c.specialOutline}},autoComplete:"uname",name:"userName",variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"User Name",autoFocus:!0,inputRef:t})}),Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(ge.a,{InputProps:{classes:{notchedOutline:c.specialOutline}},variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:e})}),Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(ge.a,{InputProps:{classes:{notchedOutline:c.specialOutline}},variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",inputRef:a,id:"password",autoComplete:"current-password"})}),Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(ge.a,{InputProps:{classes:{notchedOutline:c.specialOutline}},variant:"outlined",required:!0,fullWidth:!0,name:"password-confirm",label:"Password Confirmation",type:"password",inputRef:r,id:"passwordConfirm"})})]}),Object(v.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",className:c.submit,disabled:x,children:"Sign Up"}),Object(v.jsxs)(Ne.a,{container:!0,justify:"flex-end",children:[Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(d.b,{to:"/login",variant:"body2",style:{textDecoration:"none"},children:Object(v.jsxs)(P.a,{className:c.textColor,variant:"h6",children:[" ","Already have an account? Log in"]})})}),Object(v.jsx)(Ne.a,{item:!0,children:Object(v.jsx)(d.b,{to:"/",className:c.flex,style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",startIcon:Object(v.jsx)(On.a,{}),children:"Home"})})})]})]})]})]})})}var wn=a(23).serverURL,Cn=Object(S.a)((function(e){return{background:{background:" linear-gradient(\n      rgba(255, 255, 255, 0.7), \n      rgba(255, 255, 255, 0.7)\n    ),url(".concat(A,")"),backgroundSize:"cover",height:"100vh"},paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{marginTop:e.spacing(3),width:60,height:60,borderRadius:"30px"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2),backgroundColor:"#008B8B",color:"white",fontSize:"20px"},textColor:{color:ne.a[900]},flex:{display:"flex",alignItems:"center",marginBottom:e.spacing(3)},specialOutline:{borderColor:"rgb(0, 0, 0, 0.6) !important",borderWidth:2}}}));function kn(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Cn(),r=Object(n.useState)(""),c=Object(p.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(!1),l=Object(p.a)(o,2),u=l[0],b=l[1],x=Object(j.g)(),m=function(){var a=Object(O.a)(h.a.mark((function a(n){var r,c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r={email:e.current.value,password:t.current.value},a.prev=2,a.next=5,f.a.post(wn+"/users/login",r);case 5:if(c=a.sent,window.localStorage.setItem("token",c.data.token),void 0!=c.data.token){a.next=9;break}return a.abrupt("return",i("Password is wrong"));case 9:i(""),b(!0),x.push("/naturespots"),console.log("login submitted"),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(2),console.log(a.t0),i("Email address or password is wrong");case 19:b(!1);case 20:case"end":return a.stop()}}),a,null,[[2,15]])})));return function(e){return a.apply(this,arguments)}}();return Object(v.jsx)("div",{className:a.background,children:Object(v.jsxs)(mn.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(pn.a,{}),Object(v.jsxs)("div",{className:a.paper,children:[Object(v.jsxs)(N.a,{display:"flex",children:[Object(v.jsx)(N.a,{mr:3,children:Object(v.jsx)("img",{alt:"logo",className:a.avatar,src:D})}),Object(v.jsx)(N.a,{mt:3,mr:2,children:Object(v.jsx)(P.a,{fontWeight:"fontWeightBold",component:"h1",variant:"h2",color:"secondary",children:"Login"})}),Object(v.jsx)(N.a,{children:Object(v.jsx)(_e.a,{className:a.avatar,color:"secondary"})})]}),s&&Object(v.jsx)(fn.a,{severity:"error",children:s}),Object(v.jsxs)("form",{className:a.form,onSubmit:m,noValidate:!0,children:[Object(v.jsxs)(Ne.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(ge.a,{InputProps:{classes:{notchedOutline:a.specialOutline}},variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:e})}),Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsx)(ge.a,{InputProps:{classes:{notchedOutline:a.specialOutline}},variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",inputRef:t,id:"password",autoComplete:"current-password"})})]}),Object(v.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",className:a.submit,disabled:u,children:"Login"}),Object(v.jsxs)(Ne.a,{container:!0,justify:"flex-end",children:[Object(v.jsxs)(Ne.a,{item:!0,xs:12,children:[Object(v.jsx)(d.b,{to:"/signup",variant:"body2",style:{textDecoration:"none"},children:Object(v.jsx)(N.a,{m:2,children:Object(v.jsx)(P.a,{className:a.textColor,variant:"h6",children:"No account yet? Signup"})})}),Object(v.jsxs)(d.b,{to:"/forgotpass",variant:"body2",style:{textDecoration:"none"},children:[" ",Object(v.jsx)(N.a,{m:2,children:Object(v.jsx)(P.a,{className:a.textColor,variant:"h6",children:"Forgot Password?"})})]})]}),Object(v.jsx)(Ne.a,{item:!0,children:Object(v.jsx)(N.a,{children:Object(v.jsx)(d.b,{to:"/",className:a.flex,style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",startIcon:Object(v.jsx)(On.a,{}),children:"Home"})})})})]})]})]})]})})}var In=a(23).serverURL,Sn=Object(S.a)((function(e){return{background:{background:" linear-gradient(\n      rgba(255, 255, 255, 0.7), \n      rgba(255, 255, 255, 0.7)\n    ),url(".concat(A,")"),backgroundSize:"cover"},paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{marginTop:e.spacing(3),width:60,height:60,borderRadius:"30px"},form:{width:"350px",margin:e.spacing(2)},submit:{margin:e.spacing(3,0,2),backgroundColor:"#008B8B",color:"white",fontSize:"20px"},textColor:{color:"#008B8B"},flex:{display:"flex",alignItems:"center",marginBottom:e.spacing(3)},specialOutline:{borderColor:"rgb(0, 0, 0, 0.6) !important",borderWidth:2},media:{width:"150px",height:"150px",borderRadius:"50%"}}}));function An(){var e=Sn(),t=(Object(n.useContext)(w).userInfo,Object(n.useState)(null)),a=Object(p.a)(t,2),c=a[0],s=a[1],i=Object(n.useRef)(),o=Object(n.useRef)(),l=Object(n.useState)(""),d=Object(p.a)(l,2),u=d[0],b=d[1],x=Object(n.useState)(!0),m=Object(p.a)(x,2),g=m[0],y=m[1],C=Object(n.useState)(null),k=Object(p.a)(C,2),I=k[0],S=k[1],A=Object(n.useState)(null),U=Object(p.a)(A,2),_=U[0],F=U[1],M=Object(n.useState)(!1),W=Object(p.a)(M,2),D=W[0],L=W[1],B=Object(j.g)(),T=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window.localStorage.getItem("token"))){e.next=9;break}return a={headers:{Authorization:"Bearer ".concat(t)}},e.next=5,f.a.get(In+"/users/profile",a);case 5:n=e.sent,s(n.data),S(n.data.avatarUrl),F(n.data.avatarUrl);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:y(!1),console.log(c);case 4:case"end":return e.stop()}}),e)}))),[]);var z=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(!0),S(URL.createObjectURL(t.target.files[0])),F(t.target.files),console.log(t.target.files);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_){e.next=3;break}throw new Error("Select a file first!");case 3:return(t=new FormData).append("file",_[0]),e.next=7,f.a.post(In+"/aws/upload",t,{headers:{"Content-Type":"multipart/form-data"}});case 7:return a=e.sent,console.log("success"),e.abrupt("return",a.data.Location);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),console.log("upload failed");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n,r,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),I!=c.avatarUrl){e.next=5;break}a=c.avatarUrl,e.next=8;break;case 5:return e.next=7,E();case 7:a=e.sent;case 8:return n=0==o.current.value.length?c.username:o.current.value,r=0==i.current.value.length?c.email:i.current.value,s={userId:c._id,username:n,email:r,avatarUrl:a,oldEmail:c.email},e.prev=11,e.next=14,f.a.post(In+"/users/updateprofile",s);case 14:b(""),y(!0),console.log("profile updated"),B.push("/mypage/".concat(c._id)),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(11),console.log(e.t0),l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,n.length>0&&n.length<=3?b("Username should be longer than 3 letters"):l.test(r)?b("Email is already used"):b("Email should be valid");case 25:y(!1);case 26:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)(Ve,{}),Object(v.jsx)(P.a,{children:"Update Profile"}),u&&Object(v.jsx)(fn.a,{severity:"error",children:u}),!g&&Object(v.jsxs)("form",{className:e.form,onSubmit:G,noValidate:!0,children:[Object(v.jsxs)(Ne.a,{container:!0,spacing:2,children:[Object(v.jsx)(Ne.a,{item:!0,xs:12,children:Object(v.jsxs)(N.a,{mb:2,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(v.jsx)(N.a,{children:Object(v.jsx)("img",{className:e.media,src:I})}),Object(v.jsx)("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file",onChange:function(e){return z(e)}}),!D&&Object(v.jsx)("label",{htmlFor:"raised-button-file",children:Object(v.jsx)(R.a,{variant:"contained",color:"secondary",component:"span",startIcon:Object(v.jsx)(ea.a,{}),children:"Change"})}),D&&Object(v.jsx)(N.a,{m:2,children:Object(v.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){L(!1),S(c.avatarUrl),F(c.avatarUrl)},children:"Cancel"})})]})}),Object(v.jsx)(N.a,{m:2,children:Object(v.jsx)(P.a,{color:"secondary",children:"Leave Blank if no changes"})}),Object(v.jsxs)(Ne.a,{item:!0,xs:12,children:[Object(v.jsx)(N.a,{ml:2,display:"flex",justifyContent:"flex-start",children:Object(v.jsx)(P.a,{color:"primary",children:c.username})}),Object(v.jsx)(ge.a,{InputProps:{classes:{notchedOutline:e.specialOutline}},autoComplete:"uname",name:"userName",variant:"outlined",fullWidth:!0,id:"userName",label:"Username",autoFocus:!0,inputRef:o})]}),Object(v.jsxs)(Ne.a,{item:!0,xs:12,children:[Object(v.jsx)(N.a,{ml:2,display:"flex",justifyContent:"flex-start",children:Object(v.jsx)(P.a,{color:"primary",children:c.email})}),Object(v.jsx)(ge.a,{InputProps:{classes:{notchedOutline:e.specialOutline}},variant:"outlined",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",inputRef:i})]})]}),Object(v.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",className:e.submit,disabled:g,children:"Update"})]})]})}var Nn=Object(S.a)((function(e){return{confirm:{width:"100vw",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#F6F5EB"},imgSize:{width:"350px"}}}));function Pn(){var e=Nn();return Object(v.jsxs)(N.a,{className:e.confirm,children:[Object(v.jsx)(N.a,{children:Object(v.jsx)(P.a,{variant:"h3",color:"secondary",children:"Thank you for registering!"})}),Object(v.jsx)("img",{className:e.imgSize,src:he}),Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)(d.b,{to:"/login",style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{size:"large",variant:"contained",color:"secondary",children:Object(v.jsx)(P.a,{variant:"h5",children:"Login"})})})})]})}var Rn=a(23).serverURL,Un=Object(S.a)((function(){return{background:{background:" linear-gradient(\n      rgba(255, 255, 255, 0.7), \n      rgba(255, 255, 255, 0.7)\n    ),url(".concat(A,")"),backgroundSize:"cover",height:"100vh",display:"flex",justifyContent:"center"},boxSize:{width:"350px",height:"400px",borderRadius:"10px",backgroundColor:"#f4f4f4"},textField:{width:"300px"},teal900:{color:ne.a[900],fontWeight:"bold"}}}));function _n(){var e=Un(),t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(p.a)(i,2),l=o[0],j=o[1],u=Object(n.useState)(""),b=Object(p.a)(u,2),x=b[0],m=b[1],g=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={email:c},e.next=4,f.a.put(Rn+"/users/forgotpassword",t);case 4:e.sent,j(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),m("Email does not exist");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:e.background,children:Object(v.jsxs)(N.a,{className:e.boxSize,mt:10,children:[Object(v.jsxs)(N.a,{display:"flex",justifyContent:"center",alignItems:"center",children:[Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)(Ze.a,{alt:"logo",src:D})}),Object(v.jsx)(N.a,{mt:3,ml:2,children:Object(v.jsx)(P.a,{className:e.teal900,variant:"h2",children:"Nature Go"})})]}),x&&Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(fn.a,{severity:"error",children:x})}),!l&&Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(P.a,{color:"secondary",variant:"h3",children:"Reset Password"})}),Object(v.jsx)(N.a,{mt:5,children:Object(v.jsx)(ge.a,{id:"filled-basic",label:"Please enter your email",variant:"filled",className:e.textField,onChange:function(e){return s(e.target.value)}})}),Object(v.jsx)(N.a,{mt:4,children:Object(v.jsx)(R.a,{onClick:g,variant:"contained",color:"secondary",children:"Send Email"})}),Object(v.jsx)(N.a,{mt:8,ml:20,children:Object(v.jsx)(d.b,{to:"/",className:e.flex,style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",startIcon:Object(v.jsx)(On.a,{}),children:"Home"})})})]}),l&&!x&&Object(v.jsxs)(N.a,{mt:4,children:[Object(v.jsx)(P.a,{variant:"h3",color:"secondary",children:"Email sent successfully!"}),Object(v.jsx)(P.a,{variant:"h5",color:"primary",children:"Please check your email and click the link to change the password."}),Object(v.jsxs)(N.a,{mt:1,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(v.jsx)(N.a,{mb:3,children:Object(v.jsx)(d.b,{to:"/",className:e.flex,style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",startIcon:Object(v.jsx)(On.a,{}),children:"Home"})})}),Object(v.jsx)(d.b,{to:"/login",className:e.flex,style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",children:"Login"})})]})]})]})})}var Fn=a(23).serverURL,Mn=Object(S.a)((function(){return{background:{background:" linear-gradient(\n      rgba(255, 255, 255, 0.7), \n      rgba(255, 255, 255, 0.7)\n    ),url(".concat(A,")"),backgroundSize:"cover",height:"100vh",display:"flex",justifyContent:"center"},boxSize:{width:"350px",height:"550px",borderRadius:"10px",backgroundColor:"#f4f4f4"},textField:{width:"300px"},teal900:{color:ne.a[900],fontWeight:"bold"}}}));function Wn(){var e=Mn(),t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(null),o=Object(p.a)(i,2),l=o[0],u=o[1],b=Object(n.useState)(!1),x=Object(p.a)(b,2),m=x[0],g=x[1],y=Object(n.useState)(""),w=Object(p.a)(y,2),C=w[0],k=w[1],I=Object(j.i)().token,S=function(){var e=Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c===l){e.next=3;break}return e.abrupt("return",k("Passwords do not match."));case 3:return t={resetLink:I,newPass:c},e.next=6,f.a.put(Fn+"/users/resetpassword",t);case 6:a=e.sent,k(""),g(!0),console.log(a.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),k("Email does not exist");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:e.background,children:Object(v.jsxs)(N.a,{className:e.boxSize,mt:10,children:[Object(v.jsxs)(N.a,{display:"flex",justifyContent:"center",alignItems:"center",children:[Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)(Ze.a,{alt:"logo",src:D})}),Object(v.jsx)(N.a,{mt:3,ml:2,children:Object(v.jsx)(P.a,{className:e.teal900,variant:"h2",children:"Nature Go"})})]}),C&&Object(v.jsx)(N.a,{mt:2,children:Object(v.jsx)(fn.a,{severity:"error",children:C})}),!m&&Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)(P.a,{color:"secondary",variant:"h3",children:"Reset Password"})}),Object(v.jsx)(N.a,{mt:5,children:Object(v.jsx)(ge.a,{id:"filled-basic",label:"Please input your new password",variant:"filled",className:e.textField,onChange:function(e){return s(e.target.value)},name:"password",type:"password"})}),Object(v.jsx)(N.a,{mt:3,children:Object(v.jsx)(ge.a,{id:"filled-basic",label:"Confirm your new password",variant:"filled",className:e.textField,onChange:function(e){return u(e.target.value)},name:"confirm-password",type:"password"})}),Object(v.jsx)(N.a,{mt:4,children:Object(v.jsx)(R.a,{onClick:S,variant:"contained",color:"secondary",children:"Reset"})}),Object(v.jsx)(N.a,{mt:4,ml:20,children:Object(v.jsx)(d.b,{to:"/",className:e.flex,style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",startIcon:Object(v.jsx)(On.a,{}),children:"Home"})})})]}),m&&C.length>0&&Object(v.jsxs)(N.a,{mt:10,children:[Object(v.jsx)(P.a,{variant:"h3",color:"secondary",children:"Successfully Updated!"}),Object(v.jsx)(N.a,{mt:5,children:Object(v.jsx)(d.b,{to:"/login",className:e.flex,style:{textDecoration:"none"},children:Object(v.jsx)(R.a,{variant:"outlined",color:"secondary",startIcon:Object(v.jsx)(On.a,{}),children:"Login"})})})]})]})})}var Dn=Object(i.a)({palette:{primary:{main:I.a[200]},secondary:{main:I.a[500]}},typography:{fontFamily:"Raleway",fontWeightLight:300,fontWeightRegular:500,fontWeightMedium:500,fontWeightBold:700}});Dn=Object(o.a)(Dn);var Ln=function(){return Object(v.jsx)(l.a,{theme:Dn,children:Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(d.a,{children:Object(v.jsx)(C,{children:Object(v.jsx)(Le,{children:Object(v.jsx)(Ce,{children:Object(v.jsx)(je,{children:Object(v.jsx)(Ke,{children:Object(v.jsx)(oe,{children:Object(v.jsx)(Ua,{children:Object(v.jsx)(nn,{children:Object(v.jsx)(At,{children:Object(v.jsxs)(j.d,{children:[Object(v.jsx)(j.b,{exact:!0,path:"/",children:Object(v.jsx)(_,{})}),Object(v.jsx)(j.b,{exact:!0,path:"/naturespots",children:Object(v.jsx)(ze,{})}),Object(v.jsx)(j.b,{exact:!0,path:"/details/:spotId",children:Object(v.jsx)(oa,{})}),Object(v.jsx)(k,{exact:!0,path:"/mypage/:userId",children:Object(v.jsx)(Na,{})}),Object(v.jsx)(k,{exact:!0,path:"/savedtomatch/:userId",children:Object(v.jsx)(Ka,{})}),Object(v.jsx)(k,{exact:!0,path:"/otheruser/:otherUserId",children:Object(v.jsx)(xn,{})}),Object(v.jsx)(j.b,{exact:!0,path:"/signup",children:Object(v.jsx)(yn,{})}),Object(v.jsx)(j.b,{exact:!0,path:"/login",children:Object(v.jsx)(kn,{})}),Object(v.jsx)(j.b,{exact:!0,path:"/confirmregister",children:Object(v.jsx)(Pn,{})}),Object(v.jsx)(j.b,{exact:!0,path:"/forgotpass",children:Object(v.jsx)(_n,{})}),Object(v.jsx)(j.b,{exact:!0,path:"/resetpassword/:token",children:Object(v.jsx)(Wn,{})}),Object(v.jsx)(k,{exact:!0,path:"/updateprofile/:id",children:Object(v.jsx)(An,{})})]})})})})})})})})})})})})})},Bn=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,341)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(v.jsx)(Ln,{}),document.getElementById("root")),Bn()},86:function(e,t,a){e.exports={myMasonryGrid:"Images_myMasonryGrid__RvckD",myMasonryGridColumn:"Images_myMasonryGridColumn__3wDuo"}}},[[271,1,2]]]);
//# sourceMappingURL=main.17407788.chunk.js.map